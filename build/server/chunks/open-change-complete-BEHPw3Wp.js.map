{"version":3,"file":"open-change-complete-BEHPw3Wp.js","sources":["../../../.svelte-kit/adapter-node/chunks/open-change-complete.js"],"sourcesContent":["import { a0 as hasContext, F as getContext, x as setContext } from \"./index.js\";\nimport { w as watch } from \"./attrs.js\";\nimport \"clsx\";\nimport \"style-to-object\";\nfunction lifecycle_function_unavailable(name) {\n  const error = new Error(`lifecycle_function_unavailable\n\\`${name}(...)\\` is not available on the server\nhttps://svelte.dev/e/lifecycle_function_unavailable`);\n  error.name = \"Svelte error\";\n  throw error;\n}\nfunction mount() {\n  lifecycle_function_unavailable(\"mount\");\n}\nfunction unmount() {\n  lifecycle_function_unavailable(\"unmount\");\n}\nasync function tick() {\n}\nclass Context {\n  #name;\n  #key;\n  /**\n   * @param name The name of the context.\n   * This is used for generating the context key and error messages.\n   */\n  constructor(name) {\n    this.#name = name;\n    this.#key = Symbol(name);\n  }\n  /**\n   * The key used to get and set the context.\n   *\n   * It is not recommended to use this value directly.\n   * Instead, use the methods provided by this class.\n   */\n  get key() {\n    return this.#key;\n  }\n  /**\n   * Checks whether this has been set in the context of a parent component.\n   *\n   * Must be called during component initialisation.\n   */\n  exists() {\n    return hasContext(this.#key);\n  }\n  /**\n   * Retrieves the context that belongs to the closest parent component.\n   *\n   * Must be called during component initialisation.\n   *\n   * @throws An error if the context does not exist.\n   */\n  get() {\n    const context = getContext(this.#key);\n    if (context === void 0) {\n      throw new Error(`Context \"${this.#name}\" not found`);\n    }\n    return context;\n  }\n  /**\n   * Retrieves the context that belongs to the closest parent component,\n   * or the given fallback value if the context does not exist.\n   *\n   * Must be called during component initialisation.\n   */\n  getOr(fallback) {\n    const context = getContext(this.#key);\n    if (context === void 0) {\n      return fallback;\n    }\n    return context;\n  }\n  /**\n   * Associates the given value with the current component and returns it.\n   *\n   * Must be called during component initialisation.\n   */\n  set(context) {\n    return setContext(this.#key, context);\n  }\n}\nfunction afterTick(fn) {\n  tick().then(fn);\n}\nfunction noop() {\n}\nclass AnimationsComplete {\n  #opts;\n  #currentFrame = void 0;\n  #isRunning = false;\n  constructor(opts) {\n    this.#opts = opts;\n  }\n  #cleanup() {\n    if (this.#currentFrame) {\n      window.cancelAnimationFrame(this.#currentFrame);\n      this.#currentFrame = void 0;\n    }\n    this.#isRunning = false;\n  }\n  run(fn) {\n    if (this.#isRunning)\n      return;\n    this.#cleanup();\n    this.#isRunning = true;\n    const node = this.#opts.ref.current;\n    if (!node) {\n      this.#isRunning = false;\n      return;\n    }\n    if (typeof node.getAnimations !== \"function\") {\n      this.#executeCallback(fn);\n      return;\n    }\n    this.#currentFrame = window.requestAnimationFrame(() => {\n      const animations = node.getAnimations();\n      if (animations.length === 0) {\n        this.#executeCallback(fn);\n        return;\n      }\n      Promise.allSettled(animations.map((animation) => animation.finished)).then(() => {\n        this.#executeCallback(fn);\n      });\n    });\n  }\n  #executeCallback(fn) {\n    const execute = () => {\n      fn();\n      this.#isRunning = false;\n    };\n    if (this.#opts.afterTick) {\n      afterTick(execute);\n    } else {\n      execute();\n    }\n  }\n}\nclass OpenChangeComplete {\n  #opts;\n  #enabled;\n  #afterAnimations;\n  constructor(opts) {\n    this.#opts = opts;\n    this.#enabled = opts.enabled ?? true;\n    this.#afterAnimations = new AnimationsComplete({\n      ref: this.#opts.ref,\n      afterTick: this.#opts.open\n    });\n    watch([() => this.#opts.open.current], ([open]) => {\n      if (!this.#enabled)\n        return;\n      this.#afterAnimations.run(() => {\n        if (open === this.#opts.open.current) {\n          this.#opts.onComplete();\n        }\n      });\n    });\n  }\n}\nexport {\n  Context as C,\n  OpenChangeComplete as O,\n  afterTick as a,\n  mount as m,\n  noop as n,\n  unmount as u\n};\n"],"names":[],"mappings":"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"}