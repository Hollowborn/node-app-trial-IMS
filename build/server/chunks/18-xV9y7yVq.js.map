{"version":3,"file":"18-xV9y7yVq.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/login/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/18.js"],"sourcesContent":["import { f as fail, r as redirect } from \"../../../chunks/index2.js\";\nimport { l as login } from \"../../../chunks/auth.js\";\nconst actions = {\n  default: async ({ request, cookies }) => {\n    const data = await request.formData();\n    const username = data.get(\"username\");\n    const password = data.get(\"password\");\n    if (!username || !password) {\n      return fail(400, {\n        error: \"Username and password are required\"\n      });\n    }\n    const result = await login(username.toString(), password.toString());\n    if (!result.success) {\n      return fail(400, {\n        error: result.message\n      });\n    }\n    if (!result.sessionId) {\n      return fail(500, {\n        error: \"Failed to create session\"\n      });\n    }\n    console.log(\"DEBUG: process.env.NODE_ENV =\", process.env.NODE_ENV);\n    console.log(\n      \"DEBUG: Cookie secure flag will be =\",\n      process.env.NODE_ENV === \"production\"\n    );\n    cookies.set(\"sessionId\", result.sessionId, {\n      path: \"/\",\n      httpOnly: true,\n      sameSite: \"lax\",\n      // <-- CHANGE THIS TO LAX\n      secure: false,\n      // Keep this as is for now\n      maxAge: 60 * 60 * 24 * 7\n      // 1 week\n    });\n    throw redirect(303, \"/dashboard\");\n  }\n};\nexport {\n  actions\n};\n","import * as server from '../entries/pages/login/_page.server.ts.js';\n\nexport const index = 18;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/login/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/login/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/18.ChSFKZsi.js\",\"_app/immutable/chunks/BxWPM7vt.js\",\"_app/immutable/chunks/VrzbJYtp.js\",\"_app/immutable/chunks/jPwQk_2E.js\",\"_app/immutable/chunks/BwGKD061.js\",\"_app/immutable/chunks/K2z4qc4G.js\",\"_app/immutable/chunks/q_geWe1R.js\",\"_app/immutable/chunks/Co0R7JPe.js\",\"_app/immutable/chunks/Dg2TCPR_.js\",\"_app/immutable/chunks/BHm98m4T.js\",\"_app/immutable/chunks/CNxF7Pog.js\",\"_app/immutable/chunks/DGxjUAYV.js\",\"_app/immutable/chunks/BjxZ6Dx9.js\",\"_app/immutable/chunks/Cl_oq7nf.js\",\"_app/immutable/chunks/_Y1sUBdb.js\",\"_app/immutable/chunks/DTKX657x.js\",\"_app/immutable/chunks/KVJ3k5BI.js\",\"_app/immutable/chunks/BUlJYItk.js\",\"_app/immutable/chunks/DhHZR6J_.js\",\"_app/immutable/chunks/CmULTxPs.js\",\"_app/immutable/chunks/PI_H1sqg.js\",\"_app/immutable/chunks/C43ptUaS.js\",\"_app/immutable/chunks/twlfZeI1.js\",\"_app/immutable/chunks/Cvje7MCY.js\",\"_app/immutable/chunks/D1dXutnj.js\",\"_app/immutable/chunks/3dJlLkWl.js\",\"_app/immutable/chunks/CLa6yqf_.js\",\"_app/immutable/chunks/DOotmoI5.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":";;;;;;;;AAEA,MAAM,OAAO,GAAG;AAChB,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK;AAC3C,IAAI,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,QAAQ,EAAE;AACzC,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;AACzC,IAAI,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;AACzC,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,QAAQ,EAAE;AAChC,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE;AACvB,QAAQ,KAAK,EAAE;AACf,OAAO,CAAC;AACR;AACA,IAAI,MAAM,MAAM,GAAG,MAAM,KAAK,CAAC,QAAQ,CAAC,QAAQ,EAAE,EAAE,QAAQ,CAAC,QAAQ,EAAE,CAAC;AACxE,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;AACzB,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE;AACvB,QAAQ,KAAK,EAAE,MAAM,CAAC;AACtB,OAAO,CAAC;AACR;AACA,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;AAC3B,MAAM,OAAO,IAAI,CAAC,GAAG,EAAE;AACvB,QAAQ,KAAK,EAAE;AACf,OAAO,CAAC;AACR;AACA,IAAI,OAAO,CAAC,GAAG,CAAC,+BAA+B,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC;AACtE,IAAI,OAAO,CAAC,GAAG;AACf,MAAM,qCAAqC;AAC3C,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,KAAK;AAC/B,KAAK;AACL,IAAI,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,MAAM,CAAC,SAAS,EAAE;AAC/C,MAAM,IAAI,EAAE,GAAG;AACf,MAAM,QAAQ,EAAE,IAAI;AACpB,MAAM,QAAQ,EAAE,KAAK;AACrB;AACA,MAAM,MAAM,EAAE,KAAK;AACnB;AACA,MAAM,MAAM,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG;AAC7B;AACA,KAAK,CAAC;AACN,IAAI,MAAM,QAAQ,CAAC,GAAG,EAAE,YAAY,CAAC;AACrC;AACA,CAAC;;;;;;;ACtCW,MAAC,KAAK,GAAG;AACrB,IAAI,eAAe;AACP,MAAC,SAAS,GAAG,YAAY,eAAe,KAAK,CAAC,MAAM,OAAO,4BAAwC,CAAC,EAAE;AAEtG,MAAC,SAAS,GAAG;AACb,MAAC,OAAO,GAAG,CAAC,qCAAqC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC,CAAC,mCAAmC;AAC7/B,MAAC,WAAW,GAAG;AACf,MAAC,KAAK,GAAG;;;;"}