var k=e=>{throw TypeError(e)};var g=(e,t,n)=>t.has(e)||k("Cannot "+n);var s=(e,t,n)=>(g(e,t,"read from private field"),n?n.call(e):t.get(e)),r=(e,t,n)=>t.has(e)?k("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),i=(e,t,n,m)=>(g(e,t,"write to private field"),m?m.call(e,n):t.set(e,n),n),f=(e,t,n)=>(g(e,t,"access private method"),n);import{aF as b,aG as A,aH as F,C as E,aE as O}from"./BdQXYw_T.js";import{w as T}from"./DYevSITT.js";var d,o;class R{constructor(t){r(this,d);r(this,o);i(this,d,t),i(this,o,Symbol(t))}get key(){return s(this,o)}exists(){return b(s(this,o))}get(){const t=A(s(this,o));if(t===void 0)throw new Error(`Context "${s(this,d)}" not found`);return t}getOr(t){const n=A(s(this,o));return n===void 0?t:n}set(t){return F(s(this,o),t)}}d=new WeakMap,o=new WeakMap;function S(e){E(()=>()=>{e()})}function q(e){O().then(e)}function _(){}var l,c,u,h,w,x;class D{constructor(t){r(this,h);r(this,l);r(this,c);r(this,u,!1);i(this,l,t),S(()=>f(this,h,w).call(this))}run(t){if(s(this,u))return;f(this,h,w).call(this),i(this,u,!0);const n=s(this,l).ref.current;if(!n){i(this,u,!1);return}if(typeof n.getAnimations!="function"){f(this,h,x).call(this,t);return}i(this,c,window.requestAnimationFrame(()=>{const m=n.getAnimations();if(m.length===0){f(this,h,x).call(this,t);return}Promise.allSettled(m.map(y=>y.finished)).then(()=>{f(this,h,x).call(this,t)})}))}}l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakSet,w=function(){s(this,c)&&(window.cancelAnimationFrame(s(this,c)),i(this,c,void 0)),i(this,u,!1)},x=function(t){const n=()=>{t(),i(this,u,!1)};s(this,l).afterTick?q(n):n()};var a,p,C;class ${constructor(t){r(this,a);r(this,p);r(this,C);i(this,a,t),i(this,p,t.enabled??!0),i(this,C,new D({ref:s(this,a).ref,afterTick:s(this,a).open})),T([()=>s(this,a).open.current],([n])=>{s(this,p)&&s(this,C).run(()=>{n===s(this,a).open.current&&s(this,a).onComplete()})})}}a=new WeakMap,p=new WeakMap,C=new WeakMap;export{R as C,$ as O,q as a,_ as n,S as o};
