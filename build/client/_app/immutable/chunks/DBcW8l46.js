var at=Object.defineProperty;var tt=r=>{throw TypeError(r)};var ot=(r,t,e)=>t in r?at(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var y=(r,t,e)=>ot(r,typeof t!="symbol"?t+"":t,e),it=(r,t,e)=>t.has(r)||tt("Cannot "+e);var _=(r,t,e)=>(it(r,t,"read from private field"),e?e.call(r):t.get(r)),M=(r,t,e)=>t.has(r)?tt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e);import{p as E,d as S,a as m,f as G,k as nt}from"./BxWPM7vt.js";import{v as w,u as d,q as L,p as P,k as x,o as k,c as et,w as rt,r as st}from"./VrzbJYtp.js";import{c as H}from"./DhHZR6J_.js";import{p as l,i as J,r as C,s as K}from"./K2z4qc4G.js";import{c as N}from"./BjxZ6Dx9.js";import{b as O,a as Q}from"./BHm98m4T.js";import{a as U,e as ct,w as lt,f as p}from"./CmULTxPs.js";import{c as V,m as W}from"./PI_H1sqg.js";import{C as dt}from"./BdHGsVH7.js";import{D as ft}from"./Cd7yCszS.js";const X=ct({component:"avatar",parts:["root","image","fallback"]}),Y=new dt("Avatar.Root");var z;const Z=class Z{constructor(t){y(this,"opts");y(this,"domContext");y(this,"attachment");M(this,z,w(()=>({id:this.opts.id.current,[X.root]:"","data-status":this.opts.loadingStatus.current,...this.attachment})));this.opts=t,this.domContext=new ft(this.opts.ref),this.loadImage=this.loadImage.bind(this),this.attachment=U(this.opts.ref)}static create(t){return Y.set(new Z(t))}loadImage(t,e,o){if(this.opts.loadingStatus.current==="loaded")return;let a;const i=new Image;return i.src=t,e!==void 0&&(i.crossOrigin=e),o&&(i.referrerPolicy=o),this.opts.loadingStatus.current="loading",i.onload=()=>{a=this.domContext.setTimeout(()=>{this.opts.loadingStatus.current="loaded"},this.opts.delayMs.current)},i.onerror=()=>{this.opts.loadingStatus.current="error"},()=>{a&&this.domContext.clearTimeout(a)}}get props(){return d(_(this,z))}set props(t){L(_(this,z),t)}};z=new WeakMap;let R=Z;var T;const F=class F{constructor(t,e){y(this,"opts");y(this,"root");y(this,"attachment");M(this,T,w(()=>({id:this.opts.id.current,style:{display:this.root.opts.loadingStatus.current==="loaded"?"block":"none"},"data-status":this.root.opts.loadingStatus.current,[X.image]:"",src:this.opts.src.current,crossorigin:this.opts.crossOrigin.current,referrerpolicy:this.opts.referrerPolicy.current,...this.attachment})));this.opts=t,this.root=e,this.attachment=U(this.opts.ref),lt.pre([()=>this.opts.src.current,()=>this.opts.crossOrigin.current],([o,a])=>{if(!o){this.root.opts.loadingStatus.current="error";return}this.root.loadImage(o,a,this.opts.referrerPolicy.current)})}static create(t){return new F(t,Y.get())}get props(){return d(_(this,T))}set props(t){L(_(this,T),t)}};T=new WeakMap;let j=F;var q,D;const $=class ${constructor(t,e){y(this,"opts");y(this,"root");y(this,"attachment");M(this,q,w(()=>this.root.opts.loadingStatus.current==="loaded"?{display:"none"}:void 0));M(this,D,w(()=>({style:this.style,"data-status":this.root.opts.loadingStatus.current,[X.fallback]:"",...this.attachment})));this.opts=t,this.root=e,this.attachment=U(this.opts.ref)}static create(t){return new $(t,Y.get())}get style(){return d(_(this,q))}set style(t){L(_(this,q),t)}get props(){return d(_(this,D))}set props(t){L(_(this,D),t)}};q=new WeakMap,D=new WeakMap;let B=$;var ut=G("<div><!></div>");function ht(r,t){const e=E();P(t,!0);let o=l(t,"delayMs",3,0),a=l(t,"loadingStatus",15,"loading"),i=l(t,"id",19,()=>V(e)),f=l(t,"ref",15,null),u=C(t,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const h=R.create({delayMs:p.with(()=>o()),loadingStatus:p.with(()=>a(),s=>{var n;a()!==s&&(a(s),(n=t.onLoadingStatusChange)==null||n.call(t,s))}),id:p.with(()=>i()),ref:p.with(()=>f(),s=>f(s))}),c=w(()=>W(u,h.props));var b=S(),A=x(b);{var g=s=>{var n=S(),I=x(n);O(I,()=>t.child,()=>({props:d(c)})),m(s,n)},v=s=>{var n=ut();Q(n,()=>({...d(c)}));var I=et(n);O(I,()=>t.children??rt),st(n),m(s,n)};J(A,s=>{t.child?s(g):s(v,!1)})}m(r,b),k()}var gt=G("<img/>");function mt(r,t){const e=E();P(t,!0);let o=l(t,"id",19,()=>V(e)),a=l(t,"ref",15,null),i=l(t,"crossorigin",3,void 0),f=l(t,"referrerpolicy",3,void 0),u=C(t,["$$slots","$$events","$$legacy","src","child","id","ref","crossorigin","referrerpolicy"]);const h=j.create({src:p.with(()=>t.src),id:p.with(()=>o()),ref:p.with(()=>a(),s=>a(s)),crossOrigin:p.with(()=>i()),referrerPolicy:p.with(()=>f())}),c=w(()=>W(u,h.props));var b=S(),A=x(b);{var g=s=>{var n=S(),I=x(n);O(I,()=>t.child,()=>({props:d(c)})),m(s,n)},v=s=>{var n=gt();Q(n,()=>({...d(c),src:t.src})),nt(n),m(s,n)};J(A,s=>{t.child?s(g):s(v,!1)})}m(r,b),k()}var vt=G("<span><!></span>");function pt(r,t){const e=E();P(t,!0);let o=l(t,"id",19,()=>V(e)),a=l(t,"ref",15,null),i=C(t,["$$slots","$$events","$$legacy","children","child","id","ref"]);const f=B.create({id:p.with(()=>o()),ref:p.with(()=>a(),g=>a(g))}),u=w(()=>W(i,f.props));var h=S(),c=x(h);{var b=g=>{var v=S(),s=x(v);O(s,()=>t.child,()=>({props:d(u)})),m(g,v)},A=g=>{var v=vt();Q(v,()=>({...d(u)}));var s=et(v);O(s,()=>t.children??rt),st(v),m(g,v)};J(c,g=>{t.child?g(b):g(A,!1)})}m(r,h),k()}function Mt(r,t){P(t,!0);let e=l(t,"ref",15,null),o=C(t,["$$slots","$$events","$$legacy","ref","class"]);var a=S(),i=x(a);const f=w(()=>N("relative flex size-8 shrink-0 overflow-hidden rounded-full",t.class));H(i,()=>ht,(u,h)=>{h(u,K({"data-slot":"avatar",get class(){return d(f)}},()=>o,{get ref(){return e()},set ref(c){e(c)}}))}),m(r,a),k()}function Ot(r,t){P(t,!0);let e=l(t,"ref",15,null),o=C(t,["$$slots","$$events","$$legacy","ref","class"]);var a=S(),i=x(a);const f=w(()=>N("aspect-square size-full",t.class));H(i,()=>mt,(u,h)=>{h(u,K({"data-slot":"avatar-image",get class(){return d(f)}},()=>o,{get ref(){return e()},set ref(c){e(c)}}))}),m(r,a),k()}function zt(r,t){P(t,!0);let e=l(t,"ref",15,null),o=C(t,["$$slots","$$events","$$legacy","ref","class"]);var a=S(),i=x(a);const f=w(()=>N("bg-muted flex size-full items-center justify-center rounded-full",t.class));H(i,()=>pt,(u,h)=>{h(u,K({"data-slot":"avatar-fallback",get class(){return d(f)}},()=>o,{get ref(){return e()},set ref(c){e(c)}}))}),m(r,a),k()}export{Mt as A,Ot as a,zt as b};
