var K=Object.defineProperty;var Q=Object.getPrototypeOf;var X=Reflect.get;var D=e=>{throw TypeError(e)};var Y=(e,n,t)=>n in e?K(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var m=(e,n,t)=>Y(e,typeof n!="symbol"?n+"":n,t),I=(e,n,t)=>n.has(e)||D("Cannot "+t);var s=(e,n,t)=>(I(e,n,"read from private field"),t?t.call(e):n.get(e)),u=(e,n,t)=>n.has(e)?D("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,t),W=(e,n,t,r)=>(I(e,n,"write to private field"),r?r.call(e,t):n.set(e,t),t),g=(e,n,t)=>(I(e,n,"access private method"),t);var G=(e,n,t)=>X(Q(e),t,n);import{j as H,k as V,af as $,aG as ee,ai as te,i as ne,m as re,l as se,o as ie,aj as ae,$ as v,g as o,e as f,a as C,b as oe,u as ue,p as ce,f as L,d as he,h as fe}from"./CSgM7ggg.js";import{l as S,w as M,f as F,h as pe}from"./D5BR4JST.js";import{o as R,c as j,a as q}from"./Do_-mL-j.js";import{b as de}from"./eOTtUvit.js";import{i as me}from"./DFkGWr6I.js";function be(e,n,t){H&&V();var r=e,i=ae,a,d=$()?ee:te;ne(()=>{d(i,i=n())&&(a&&re(a),a=se(()=>t(r)))}),H&&(r=ie)}var c,h,p,A,w;const y=class y extends Map{constructor(t){super();u(this,A);u(this,c,new Map);u(this,h,v(0));u(this,p,v(0));if(t){for(var[r,i]of t)super.set(r,i);s(this,p).v=super.size}}has(t){var r=s(this,c),i=r.get(t);if(i===void 0){var a=super.get(t);if(a!==void 0)i=v(0),r.set(t,i);else return o(s(this,h)),!1}return o(i),!0}forEach(t,r){g(this,A,w).call(this),super.forEach(t,r)}get(t){var r=s(this,c),i=r.get(t);if(i===void 0){var a=super.get(t);if(a!==void 0)i=v(0),r.set(t,i);else{o(s(this,h));return}}return o(i),super.get(t)}set(t,r){var z;var i=s(this,c),a=i.get(t),d=super.get(t),T=super.set(t,r),l=s(this,h);if(a===void 0)a=v(0),i.set(t,a),f(s(this,p),super.size),S(l);else if(d!==r){S(a);var x=l.reactions===null?null:new Set(l.reactions),k=x===null||!((z=a.reactions)!=null&&z.every(J=>x.has(J)));k&&S(l)}return T}delete(t){var r=s(this,c),i=r.get(t),a=super.delete(t);return i!==void 0&&(r.delete(t),f(s(this,p),super.size),f(i,-1),S(s(this,h))),a}clear(){if(super.size!==0){super.clear();var t=s(this,c);f(s(this,p),0);for(var r of t.values())f(r,-1);S(s(this,h)),t.clear()}}keys(){return o(s(this,h)),super.keys()}values(){return g(this,A,w).call(this),super.values()}entries(){return g(this,A,w).call(this),super.entries()}[Symbol.iterator](){return this.entries()}get size(){return o(s(this,p)),super.size}};c=new WeakMap,h=new WeakMap,p=new WeakMap,A=new WeakSet,w=function(){o(s(this,h));var t=s(this,c);if(s(this,p).v!==t.size){for(var r of G(y.prototype,this,"keys").call(this))if(!t.has(r)){var i=v(0);t.set(r,i)}}for([,i]of s(this,c))o(i)};let B=y;var N;class le{constructor(n,t){u(this,N,C(void 0));t!==void 0&&f(s(this,N),t,!0),M(()=>n(),(r,i)=>{f(s(this,N),i,!0)})}get current(){return o(s(this,N))}}N=new WeakMap;const Me="ArrowDown",Ie="ArrowLeft",Re="ArrowRight",Ce="ArrowUp",ye="End",xe="Enter",ze="Escape",De="Home",We="PageDown",Ge="PageUp",He=" ",Le="Tab";var _,b,Z;class ve{constructor(n,t){u(this,b);m(this,"state");u(this,_);this.state=F(n),W(this,_,t),this.dispatch=this.dispatch.bind(this)}dispatch(n){this.state.current=g(this,b,Z).call(this,n)}}_=new WeakMap,b=new WeakSet,Z=function(n){return s(this,_)[this.state.current][n]??this.state.current};const Ae={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}};var E,P,O;class Ne{constructor(n){m(this,"opts");u(this,E,C("none"));u(this,P,C(oe({})));m(this,"initialStatus");m(this,"previousPresent");m(this,"machine");m(this,"present");u(this,O,ue(()=>["mounted","unmountSuspended"].includes(this.machine.state.current)));this.opts=n,this.present=this.opts.open,this.initialStatus=n.open.current?"mounted":"unmounted",this.previousPresent=new le(()=>this.present.current),this.machine=new ve(this.initialStatus,Ae),this.handleAnimationEnd=this.handleAnimationEnd.bind(this),this.handleAnimationStart=this.handleAnimationStart.bind(this),ge(this),Se(this),_e(this)}get prevAnimationNameState(){return o(s(this,E))}set prevAnimationNameState(n){f(s(this,E),n,!0)}get styles(){return o(s(this,P))}set styles(n){f(s(this,P),n,!0)}handleAnimationEnd(n){if(!this.opts.ref.current)return;const t=U(this.opts.ref.current),r=t.includes(n.animationName)||t==="none";n.target===this.opts.ref.current&&r&&this.machine.dispatch("ANIMATION_END")}handleAnimationStart(n){this.opts.ref.current&&n.target===this.opts.ref.current&&(this.prevAnimationNameState=U(this.opts.ref.current))}get isPresent(){return o(s(this,O))}set isPresent(n){f(s(this,O),n)}}E=new WeakMap,P=new WeakMap,O=new WeakMap;function ge(e){M(()=>e.present.current,()=>{if(!e.opts.ref.current||!(e.present.current!==e.previousPresent.current))return;const t=e.prevAnimationNameState,r=U(e.opts.ref.current);if(e.present.current)e.machine.dispatch("MOUNT");else if(r==="none"||e.styles.display==="none")e.machine.dispatch("UNMOUNT");else{const i=t!==r;e.previousPresent.current&&i?e.machine.dispatch("ANIMATION_OUT"):e.machine.dispatch("UNMOUNT")}})}function Se(e){M(()=>e.machine.state.current,()=>{if(!e.opts.ref.current)return;const n=U(e.opts.ref.current);e.prevAnimationNameState=e.machine.state.current==="mounted"?n:"none"})}function _e(e){M(()=>e.opts.ref.current,()=>{if(e.opts.ref.current)return e.styles=getComputedStyle(e.opts.ref.current),pe(R(e.opts.ref.current,"animationstart",e.handleAnimationStart),R(e.opts.ref.current,"animationcancel",e.handleAnimationEnd),R(e.opts.ref.current,"animationend",e.handleAnimationEnd))})}function U(e){return e&&getComputedStyle(e).animationName||"none"}function je(e,n){ce(n,!0);const t=new Ne({open:F.with(()=>n.open),ref:n.ref});var r=j(),i=L(r);{var a=d=>{var T=j(),l=L(T);de(l,()=>n.presence??fe,()=>({present:t.isPresent})),q(d,T)};me(i,d=>{(n.forceMount||n.open||t.isPresent)&&d(a)})}q(e,r),he()}export{Ce as A,xe as E,De as H,je as P,He as S,Le as T,Me as a,Ge as b,We as c,ye as d,le as e,ze as f,B as g,Re as h,Ie as i,be as k};
