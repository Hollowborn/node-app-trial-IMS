import{f as c,a as e,t as v,c as Ce}from"../chunks/Do_-mL-j.js";import{p as zt,a as S,b as Je,f as m,t as L,d as Jt,g as a,u as mt,c as u,s as t,e as o,n,r as _}from"../chunks/CSgM7ggg.js";import{s as j}from"../chunks/Cc2sBIKg.js";import{i as Ie}from"../chunks/DFkGWr6I.js";import{e as Gt,i as Mt}from"../chunks/BveS6AeT.js";import{c as p}from"../chunks/BxwOPTHF.js";import{a as lt,e as dt,A as nt}from"../chunks/Dl7G6IOE.js";import{r as yt,s as xt}from"../chunks/eOTtUvit.js";import{i as Ee,g as bt}from"../chunks/DiJvn89z.js";import{B as pe}from"../chunks/BVmkDKMc.js";import{I as X}from"../chunks/B5-iWWaj.js";import{C as Qt,a as Xt,b as Yt,c as Zt}from"../chunks/BBrFK00f.js";import{L as se}from"../chunks/Bo2GsiZ3.js";import{T as er,a as tr,b as Pt,c as be,d as rr,P as kt,D as wt,e as At,f as St,g as Dt,h as Ct,A as Ht,i as Tt,R as Rt,j as Pe,S as ar,C as sr}from"../chunks/CdrzcX6z.js";import{P as or,A as lr,a as dr,b as nr,c as ir,d as vr,e as ur,R as _r,f as cr}from"../chunks/DRgJLo_S.js";import"../chunks/Dlm0QRJp.js";import{R as $r}from"../chunks/BAa4oyvZ.js";import{S as fr}from"../chunks/C9JwNqn8.js";import{A as pr}from"../chunks/jrVE8UPr.js";import{S as gr}from"../chunks/C0R_oNfb.js";import{P as hr,C as mr,T as yr}from"../chunks/ARt1Dh6s.js";import{A as xr,a as br}from"../chunks/B3v1Wr7v.js";import{T as Pr,a as kr}from"../chunks/HFpTe9lc.js";var wr=c("<!> Back to Stocking Info",1),Ar=c("<!> <!>",1),Sr=c("<!> Add Harvest",1),Dr=c('<div class="text-center py-8 text-gray-500">No harvest records found for this stocking event.</div>'),Cr=c('<div class="flex items-center gap-1">Harvest Date <!></div>'),Hr=c('<div class="flex items-center gap-1">Avg. Body Weight (g) <!></div>'),Tr=c('<div class="flex items-center gap-1">Culture Days <!></div>'),Rr=c('<div class="flex items-center gap-1">Harvest Volume (kg) <!></div>'),Nr=c('<div class="flex items-center gap-1">Price per Kg (₱) <!></div>'),qr=c("<!> <!> <!> <!> <!> <!> <!>",1),Br=c("<p> </p>"),Lr=c("<!> <!>",1),Or=c('<span class="text-gray-400 italic">N/A</span>'),Ir=c('<div class="flex flex justify-center space-x-2"><!> <!></div>'),Er=c("<!> <!> <!> <!> <!> <!> <!>",1),Kr=c("<!> <!>",1),Vr=c('<div class="border rounded-lg"><!></div>'),jr=c('<div class="flex items-center gap-4 mb-4"><div class="relative flex-1"><!> <!></div> <!></div> <!>',1),Fr=c("<!> <!>",1),Ur=c("<!> <!>",1),Wr=c("<!> <!>",1),zr=c('<!> <form method="POST" action="?/create"><div class="space-y-4 mt-6"><!> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="flex gap-2 pt-4"><!> <!></div></div></form>',1),Jr=c("<!> <!>",1),Gr=c("<!> <!>",1),Mr=c("<!> <!>",1),Qr=c('<!> <form method="POST" action="?/update"><input type="hidden" name="id"/> <div class="space-y-4 mt-6"><!> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div> <div class="flex gap-2 pt-4"><!> <!></div></div></form>',1),Xr=c("<!> <!>",1),Yr=c("<!> <!>",1),Zr=c('<form method="POST" action="?/delete"><input type="hidden" name="id"/> <!> <!></form>'),ea=c("<!> <!>",1),ta=c("<!> <!>",1),ra=c("<!> <!>",1),aa=c('<div class="pointer-events-auto"><!></div>'),sa=c('<div class="space-y-6"><div class="flex justify-between items-center"><div><!> <h1 class="text-2xl font-bold"> </h1> <p class="text-gray-500"> </p></div></div></div> <!> <!> <!> <!> <div class="fixed inset-x-0 bottom-6 flex justify-center z-50 pointer-events-none"><!></div>',1);function Da(Nt,D){zt(D,!0);let ke=S(Je(D.data.search||"")),Y=S(null),Ge=S(null),He=S(!1),Te=S(!1),Re=S(!1),Me=S(null),Ke=S(""),Ve=S(null),je=S(null),Fe=S(null),Ue=S(null),We=S(""),ze=S(null),R=S(Je({})),Ne=S(!1),Qe="",we="default",Ae="",qe=S(Je(D.data.sortBy||"harvest_date")),Se=S(Je(D.data.sortOrder||"desc"));function Xe(d,k){switch(Qe=d,o(Ne,!0),k){case"create":we="default",Ae="bg-[var(--primary)] text-[var(--primary-foreground)]";break;case"update":we="default",Ae="bg-[var(--secondary)] text-[var(--secondary-foreground)]";break;case"delete":we="destructive",Ae="";break;default:we="default",Ae="bg-[var(--primary)] text-[var(--primary-foreground)]"}setTimeout(()=>o(Ne,!1),3e3)}function Ye(d){Qe=d,we="destructive",Ae="",o(Ne,!0),setTimeout(()=>o(Ne,!1),3e3)}let Ze=mt(()=>{var d;return((d=D.data.harvestRecords)==null?void 0:d.filter(k=>{var y;return((y=k.notes)==null?void 0:y.toLowerCase().includes(a(ke).toLowerCase()))||k.harvest_date.toLowerCase().includes(a(ke).toLowerCase())}))||[]});function qt(d){o(ze,d.id,!0),o(Ge,{...d},!0),o(R,{...d},!0),o(Te,!0)}function Bt(){o(ze,null),o(R,{},!0),o(Ge,null),o(Te,!1)}async function Lt(){const d=new URL(window.location.href);a(ke)?d.searchParams.set("search",a(ke)):d.searchParams.delete("search"),d.searchParams.set("sort",a(qe)),d.searchParams.set("order",a(Se)),await bt(d.pathname+d.search,{replaceState:!0}),Ee(`app:harvest_info:${D.data.stocking.id}`)}function Ot(d){o(Me,d,!0),o(Re,!0)}function et(d){return d?new Date(d+"T00:00:00").toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A"}function It(){o(He,!0),o(Ke,""),o(Ve,null),o(je,null),o(Fe,null),o(Ue,null),o(We,""),o(Y,null)}async function Be(d){let k=d,y;a(qe)===d?a(Se)==="asc"?y="desc":y="asc":(k=d,y="asc"),o(qe,k,!0),o(Se,y,!0);const C=new URL(window.location.href);C.searchParams.set("sort",a(qe)),C.searchParams.set("order",a(Se)),console.log("Navigating to:",C.pathname+C.search),await bt(C.pathname+C.search),Ee(`app:harvest_info:${D.data.stocking.id}`)}function Le(d){if(a(qe)===d){if(a(Se)==="asc")return xr;if(a(Se)==="desc")return br}return mr}var it=sa(),tt=m(it),vt=u(tt),ut=u(vt),_t=u(ut);const Et=mt(()=>`/dashboard/clients/${D.data.client.id}/stocking-info`);pe(_t,{variant:"ghost",get href(){return a(Et)},class:"mb-2 -ml-4",children:(d,k)=>{var y=wr(),C=m(y);pr(C,{class:"h-4 w-4 mr-2"}),n(),e(d,y)},$$slots:{default:!0}});var rt=t(_t,2),Kt=u(rt);_(rt);var ct=t(rt,2),Vt=u(ct);_(ct),_(ut),_(vt),_(tt);var $t=t(tt,2);Qt($t,{children:(d,k)=>{var y=Fr(),C=m(y);Xt(C,{class:"h-4",children:(Z,ve)=>{var F=Ar(),O=m(F);Yt(O,{children:(H,le)=>{n();var ue=v();L(()=>j(ue,`Total Harvest Records: ${a(Ze).length??""}`)),e(H,ue)},$$slots:{default:!0}});var ge=t(O,2);fr(ge,{class:"my-2"}),e(Z,F)},$$slots:{default:!0}});var oe=t(C,2);Zt(oe,{children:(Z,ve)=>{var F=jr(),O=m(F),ge=u(O),H=u(ge);X(H,{placeholder:"Search by notes or harvest date...",class:"pl-10",get value(){return a(ke)},set value(z){o(ke,z,!0)},$$events:{input:Lt}});var le=t(H,2);gr(le,{class:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),_(ge);var ue=t(ge,2);pe(ue,{onclick:It,children:(z,N)=>{var J=Sr(),G=m(J);hr(G,{class:"h-4 w-4 mr-2"}),n(),e(z,J)},$$slots:{default:!0}}),_(O);var U=t(O,2);{var W=z=>{var N=Dr();e(z,N)},xe=z=>{var N=Vr(),J=u(N);er(J,{children:(G,de)=>{var ee=Kr(),ne=m(ee);tr(ne,{children:(A,M)=>{Pt(A,{children:(q,B)=>{var g=qr(),f=m(g);be(f,{class:"text-sm font-semibold text-gray-600 dark:text-gray-400 border-b pb-2 mb-2 cursor-pointer",onclick:()=>Be("harvest_date"),children:(P,K)=>{var $=Cr(),w=t(u($));p(w,()=>Le("harvest_date"),(T,h)=>{h(T,{class:"h-4 w-4"})}),_($),e(P,$)},$$slots:{default:!0}});var b=t(f,2);be(b,{class:"text-sm font-semibold text-gray-600 dark:text-gray-400 border-b pb-2 mb-2 cursor-pointer",onclick:()=>Be("actual_body_weight_g"),children:(P,K)=>{var $=Hr(),w=t(u($));p(w,()=>Le("actual_body_weight_g"),(T,h)=>{h(T,{class:"h-4 w-4"})}),_($),e(P,$)},$$slots:{default:!0}});var I=t(b,2);be(I,{class:"text-sm font-semibold text-gray-600 dark:text-gray-400 border-b pb-2 mb-2 cursor-pointer",onclick:()=>Be("culture_days"),children:(P,K)=>{var $=Tr(),w=t(u($));p(w,()=>Le("culture_days"),(T,h)=>{h(T,{class:"h-4 w-4"})}),_($),e(P,$)},$$slots:{default:!0}});var E=t(I,2);be(E,{class:"text-sm font-semibold text-gray-600 dark:text-gray-400 border-b pb-2 mb-2 cursor-pointer",onclick:()=>Be("harvest_volume_kg"),children:(P,K)=>{var $=Rr(),w=t(u($));p(w,()=>Le("harvest_volume_kg"),(T,h)=>{h(T,{class:"h-4 w-4"})}),_($),e(P,$)},$$slots:{default:!0}});var te=t(E,2);be(te,{class:"text-sm font-semibold text-gray-600 dark:text-gray-400 border-b pb-2 mb-2 cursor-pointer",onclick:()=>Be("price_per_kg"),children:(P,K)=>{var $=Nr(),w=t(u($));p(w,()=>Le("price_per_kg"),(T,h)=>{h(T,{class:"h-4 w-4"})}),_($),e(P,$)},$$slots:{default:!0}});var _e=t(te,2);be(_e,{class:"text-sm font-semibold text-gray-600 dark:text-gray-400 border-b pb-2 mb-2",children:(P,K)=>{n();var $=v("Notes");e(P,$)},$$slots:{default:!0}});var ce=t(_e,2);be(ce,{class:"text-sm font-semibold text-gray-600 dark:text-gray-400 border-b pb-2 mb-2 text-center",children:(P,K)=>{n();var $=v("Actions");e(P,$)},$$slots:{default:!0}}),e(q,g)},$$slots:{default:!0}})},$$slots:{default:!0}});var he=t(ne,2);rr(he,{children:(A,M)=>{var q=Ce(),B=m(q);Gt(B,17,()=>a(Ze),Mt,(g,f,b)=>{Pt(g,{class:b%2===0?"bg-gray-50 dark:bg-card":"bg-white dark:bg-background",children:(I,E)=>{var te=Er(),_e=m(te);Pe(_e,{children:(h,re)=>{n();var x=v();L(s=>j(x,s),[()=>et(a(f).harvest_date)]),e(h,x)},$$slots:{default:!0}});var ce=t(_e,2);Pe(ce,{children:(h,re)=>{n();var x=v();L(()=>j(x,`${a(f).actual_body_weight_g??""} g`)),e(h,x)},$$slots:{default:!0}});var P=t(ce,2);Pe(P,{children:(h,re)=>{n();var x=v();L(()=>j(x,`${a(f).culture_days??""} days`)),e(h,x)},$$slots:{default:!0}});var K=t(P,2);Pe(K,{children:(h,re)=>{n();var x=v();L(()=>j(x,`${a(f).harvest_volume_kg??""} kg`)),e(h,x)},$$slots:{default:!0}});var $=t(K,2);Pe($,{children:(h,re)=>{n();var x=v();L(s=>j(x,`₱${s??""}`),[()=>a(f).price_per_kg.toFixed(2)]),e(h,x)},$$slots:{default:!0}});var w=t($,2);Pe(w,{class:"max-w-xs truncate",children:(h,re)=>{var x=Ce(),s=m(x);{var r=i=>{var V=Ce(),ae=m(V);p(ae,()=>$r,($e,fe)=>{fe($e,{children:(Q,ie)=>{var me=Lr(),ye=m(me);p(ye,()=>Pr,(at,st)=>{st(at,{class:"truncate max-w-xs block",children:(ot,Ut)=>{n();var De=v();L(()=>j(De,a(f).notes)),e(ot,De)},$$slots:{default:!0}})});var Oe=t(ye,2);p(Oe,()=>kr,(at,st)=>{st(at,{children:(ot,Ut)=>{var De=Br(),Wt=u(De,!0);_(De),L(()=>j(Wt,a(f).notes)),e(ot,De)},$$slots:{default:!0}})}),e(Q,me)},$$slots:{default:!0}})}),e(i,V)},l=i=>{var V=Or();e(i,V)};Ie(s,i=>{a(f).notes?i(r):i(l,!1)})}e(h,x)},$$slots:{default:!0}});var T=t(w,2);Pe(T,{children:(h,re)=>{var x=Ir(),s=u(x);pe(s,{variant:"outline",size:"sm",onclick:()=>qt(a(f)),children:(l,i)=>{ar(l,{})},$$slots:{default:!0}});var r=t(s,2);pe(r,{variant:"outline",size:"sm",onclick:()=>Ot(a(f)),children:(l,i)=>{yr(l,{class:"h-4 w-4 text-red-500"})},$$slots:{default:!0}}),_(x),e(h,x)},$$slots:{default:!0}}),e(I,te)},$$slots:{default:!0}})}),e(A,q)},$$slots:{default:!0}}),e(G,ee)},$$slots:{default:!0}}),_(N),e(z,N)};Ie(U,z=>{a(Ze).length===0?z(W):z(xe,!1)})}e(Z,F)},$$slots:{default:!0}}),e(d,y)},$$slots:{default:!0}});var ft=t($t,2);p(ft,()=>Rt,(d,k)=>{k(d,{get open(){return a(He)},set open(y){o(He,y,!0)},children:(y,C)=>{var oe=Ce(),Z=m(oe);p(Z,()=>kt,(ve,F)=>{F(ve,{children:(O,ge)=>{var H=Jr(),le=m(H);p(le,()=>wt,(U,W)=>{W(U,{})});var ue=t(le,2);p(ue,()=>At,(U,W)=>{W(U,{class:"sm:max-w-[425px] p-6",children:(xe,z)=>{var N=zr(),J=m(N);p(J,()=>St,(s,r)=>{r(s,{children:(l,i)=>{var V=Ur(),ae=m(V);p(ae,()=>Dt,(fe,Q)=>{Q(fe,{children:(ie,me)=>{n();var ye=v("Add New Harvest Record");e(ie,ye)},$$slots:{default:!0}})});var $e=t(ae,2);p($e,()=>Ct,(fe,Q)=>{Q(fe,{children:(ie,me)=>{n();var ye=v("Enter the harvest details below.");e(ie,ye)},$$slots:{default:!0}})}),e(l,V)},$$slots:{default:!0}})});var G=t(J,2),de=u(G),ee=u(de);{var ne=s=>{nt(s,{variant:"destructive",children:(r,l)=>{var i=Wr(),V=m(i);Ht(V,{class:"h-4 w-4"});var ae=t(V,2);Tt(ae,{children:($e,fe)=>{n();var Q=v();L(()=>j(Q,a(Y))),e($e,Q)},$$slots:{default:!0}}),e(r,i)},$$slots:{default:!0}})};Ie(ee,s=>{a(Y)&&s(ne)})}var he=t(ee,2),A=u(he);se(A,{for:"harvest_date_create",children:(s,r)=>{n();var l=v("Harvest Date *");e(s,l)},$$slots:{default:!0}});var M=t(A,2);X(M,{id:"harvest_date_create",name:"harvest_date",type:"date",required:!0,get value(){return a(Ke)},set value(s){o(Ke,s,!0)}}),_(he);var q=t(he,2),B=u(q);se(B,{for:"actual_body_weight_g_create",children:(s,r)=>{n();var l=v("Average Body Weight (g) *");e(s,l)},$$slots:{default:!0}});var g=t(B,2);X(g,{id:"actual_body_weight_g_create",name:"actual_body_weight_g",type:"number",step:"0.01",required:!0,get value(){return a(Ve)},set value(s){o(Ve,s,!0)}}),_(q);var f=t(q,2),b=u(f);se(b,{for:"culture_days_create",children:(s,r)=>{n();var l=v("Culture Days *");e(s,l)},$$slots:{default:!0}});var I=t(b,2);X(I,{id:"culture_days_create",name:"culture_days",type:"number",step:"1",required:!0,get value(){return a(je)},set value(s){o(je,s,!0)}}),_(f);var E=t(f,2),te=u(E);se(te,{for:"harvest_volume_kg_create",children:(s,r)=>{n();var l=v("Harvest Volume (kg) *");e(s,l)},$$slots:{default:!0}});var _e=t(te,2);X(_e,{id:"harvest_volume_kg_create",name:"harvest_volume_kg",type:"number",step:"0.01",required:!0,get value(){return a(Fe)},set value(s){o(Fe,s,!0)}}),_(E);var ce=t(E,2),P=u(ce);se(P,{for:"price_per_kg_create",children:(s,r)=>{n();var l=v("Price per Kg (₱) *");e(s,l)},$$slots:{default:!0}});var K=t(P,2);X(K,{id:"price_per_kg_create",name:"price_per_kg",type:"number",step:"0.01",required:!0,get value(){return a(Ue)},set value(s){o(Ue,s,!0)}}),_(ce);var $=t(ce,2),w=u($);se(w,{for:"notes_create",children:(s,r)=>{n();var l=v("Notes");e(s,l)},$$slots:{default:!0}});var T=t(w,2);X(T,{id:"notes_create",name:"notes",type:"text",maxlength:255,get value(){return a(We)},set value(s){o(We,s,!0)}}),_($);var h=t($,2),re=u(h);pe(re,{type:"submit",class:"flex-1",children:(s,r)=>{n();var l=v("Add Harvest");e(s,l)},$$slots:{default:!0}});var x=t(re,2);pe(x,{type:"button",variant:"outline",onclick:()=>o(He,!1),children:(s,r)=>{n();var l=v("Cancel");e(s,l)},$$slots:{default:!0}}),_(h),_(de),_(G),lt(G,(s,r)=>{var l;return(l=dt)==null?void 0:l(s,r)},()=>()=>async({result:s})=>{var r,l;s.type==="success"?(o(He,!1),await Ee(`app:harvest_info:${D.data.stocking.id}`),Xe("Harvest record created successfully!","create"),o(Ke,""),o(Ve,null),o(je,null),o(Fe,null),o(Ue,null),o(We,""),o(Y,null)):s.type==="failure"&&(o(Y,typeof((r=s.data)==null?void 0:r.error)=="string"?s.data.error:JSON.stringify((l=s.data)==null?void 0:l.error)||"An error occurred",!0),Ye(a(Y)))}),e(xe,N)},$$slots:{default:!0}})}),e(O,H)},$$slots:{default:!0}})}),e(y,oe)},$$slots:{default:!0}})});var pt=t(ft,2);p(pt,()=>Rt,(d,k)=>{k(d,{get open(){return a(Te)},set open(y){o(Te,y,!0)},children:(y,C)=>{var oe=Ce(),Z=m(oe);p(Z,()=>kt,(ve,F)=>{F(ve,{children:(O,ge)=>{var H=Xr(),le=m(H);p(le,()=>wt,(U,W)=>{W(U,{})});var ue=t(le,2);p(ue,()=>At,(U,W)=>{W(U,{class:"sm:max-w-[425px] p-6",children:(xe,z)=>{var N=Qr(),J=m(N);p(J,()=>St,(r,l)=>{l(r,{children:(i,V)=>{var ae=Gr(),$e=m(ae);p($e,()=>Dt,(Q,ie)=>{ie(Q,{children:(me,ye)=>{n();var Oe=v("Edit Harvest Record");e(me,Oe)},$$slots:{default:!0}})});var fe=t($e,2);p(fe,()=>Ct,(Q,ie)=>{ie(Q,{children:(me,ye)=>{n();var Oe=v("Update the harvest details below.");e(me,Oe)},$$slots:{default:!0}})}),e(i,ae)},$$slots:{default:!0}})});var G=t(J,2),de=u(G);yt(de);var ee=t(de,2),ne=u(ee);{var he=r=>{nt(r,{variant:"destructive",children:(l,i)=>{var V=Mr(),ae=m(V);Ht(ae,{class:"h-4 w-4"});var $e=t(ae,2);Tt($e,{children:(fe,Q)=>{n();var ie=v();L(()=>j(ie,a(Y))),e(fe,ie)},$$slots:{default:!0}}),e(l,V)},$$slots:{default:!0}})};Ie(ne,r=>{a(Y)&&r(he)})}var A=t(ne,2),M=u(A);se(M,{for:"harvest_date_edit",children:(r,l)=>{n();var i=v("Harvest Date *");e(r,i)},$$slots:{default:!0}});var q=t(M,2);X(q,{id:"harvest_date_edit",name:"harvest_date",type:"date",required:!0,get value(){return a(R).harvest_date},set value(r){a(R).harvest_date=r}}),_(A);var B=t(A,2),g=u(B);se(g,{for:"actual_body_weight_g_edit",children:(r,l)=>{n();var i=v("Average Body Weight (g) *");e(r,i)},$$slots:{default:!0}});var f=t(g,2);X(f,{id:"actual_body_weight_g_edit",name:"actual_body_weight_g",type:"number",step:"0.01",required:!0,get value(){return a(R).actual_body_weight_g},set value(r){a(R).actual_body_weight_g=r}}),_(B);var b=t(B,2),I=u(b);se(I,{for:"culture_days_edit",children:(r,l)=>{n();var i=v("Culture Days *");e(r,i)},$$slots:{default:!0}});var E=t(I,2);X(E,{id:"culture_days_edit",name:"culture_days",type:"number",step:"1",required:!0,get value(){return a(R).culture_days},set value(r){a(R).culture_days=r}}),_(b);var te=t(b,2),_e=u(te);se(_e,{for:"harvest_volume_kg_edit",children:(r,l)=>{n();var i=v("Harvest Volume (kg) *");e(r,i)},$$slots:{default:!0}});var ce=t(_e,2);X(ce,{id:"harvest_volume_kg_edit",name:"harvest_volume_kg",type:"number",step:"0.01",required:!0,get value(){return a(R).harvest_volume_kg},set value(r){a(R).harvest_volume_kg=r}}),_(te);var P=t(te,2),K=u(P);se(K,{for:"price_per_kg_edit",children:(r,l)=>{n();var i=v("Price per Kg (₱) *");e(r,i)},$$slots:{default:!0}});var $=t(K,2);X($,{id:"price_per_kg_edit",name:"price_per_kg",type:"number",step:"0.01",required:!0,get value(){return a(R).price_per_kg},set value(r){a(R).price_per_kg=r}}),_(P);var w=t(P,2),T=u(w);se(T,{for:"notes_edit",children:(r,l)=>{n();var i=v("Notes");e(r,i)},$$slots:{default:!0}});var h=t(T,2);X(h,{id:"notes_edit",name:"notes",type:"text",maxlength:255,get value(){return a(R).notes},set value(r){a(R).notes=r}}),_(w);var re=t(w,2),x=u(re);pe(x,{type:"submit",class:"flex-1",children:(r,l)=>{n();var i=v("Save Changes");e(r,i)},$$slots:{default:!0}});var s=t(x,2);pe(s,{type:"button",variant:"outline",onclick:Bt,children:(r,l)=>{n();var i=v("Cancel");e(r,i)},$$slots:{default:!0}}),_(re),_(ee),_(G),lt(G,(r,l)=>{var i;return(i=dt)==null?void 0:i(r,l)},()=>()=>async({result:r})=>{var l,i;r.type==="success"?(o(Te,!1),await Ee(`app:harvest_info:${D.data.stocking.id}`),Xe("Harvest record updated successfully!","update"),o(ze,null),o(R,{},!0),o(Ge,null)):r.type==="failure"&&(o(Y,typeof((l=r.data)==null?void 0:l.error)=="string"?r.data.error:JSON.stringify((i=r.data)==null?void 0:i.error)||"An error occurred",!0),Ye(a(Y)))}),L(()=>xt(de,a(ze))),e(xe,N)},$$slots:{default:!0}})}),e(O,H)},$$slots:{default:!0}})}),e(y,oe)},$$slots:{default:!0}})});var gt=t(pt,2);p(gt,()=>_r,(d,k)=>{k(d,{get open(){return a(Re)},set open(y){o(Re,y,!0)},children:(y,C)=>{var oe=Ce(),Z=m(oe);p(Z,()=>or,(ve,F)=>{F(ve,{children:(O,ge)=>{var H=ta(),le=m(H);p(le,()=>lr,(U,W)=>{W(U,{})});var ue=t(le,2);p(ue,()=>dr,(U,W)=>{W(U,{children:(xe,z)=>{var N=ea(),J=m(N);p(J,()=>nr,(de,ee)=>{ee(de,{children:(ne,he)=>{var A=Yr(),M=m(A);p(M,()=>ir,(B,g)=>{g(B,{children:(f,b)=>{n();var I=v("Delete Harvest Record");e(f,I)},$$slots:{default:!0}})});var q=t(M,2);p(q,()=>vr,(B,g)=>{g(B,{children:(f,b)=>{n();var I=v();L(E=>j(I,`Are you sure you want to delete the harvest record for ${E??""}? This action cannot be undone.`),[()=>{var E;return et((E=a(Me))==null?void 0:E.harvest_date)}]),e(f,I)},$$slots:{default:!0}})}),e(ne,A)},$$slots:{default:!0}})});var G=t(J,2);p(G,()=>ur,(de,ee)=>{ee(de,{children:(ne,he)=>{var A=Zr(),M=u(A);yt(M);var q=t(M,2);pe(q,{type:"button",variant:"outline",onclick:()=>o(Re,!1),children:(g,f)=>{n();var b=v("Cancel");e(g,b)},$$slots:{default:!0}});var B=t(q,2);pe(B,{type:"submit",variant:"destructive",children:(g,f)=>{n();var b=v("Delete");e(g,b)},$$slots:{default:!0}}),_(A),lt(A,(g,f)=>{var b;return(b=dt)==null?void 0:b(g,f)},()=>()=>async({result:g})=>{var f,b;g.type==="success"?(o(Re,!1),await Ee(`app:harvest_info:${D.data.stocking.id}`),Xe("Harvest record deleted successfully!","delete")):g.type==="failure"&&(o(Y,typeof((f=g.data)==null?void 0:f.error)=="string"?g.data.error:JSON.stringify((b=g.data)==null?void 0:b.error)||"An error occurred",!0),Ye(a(Y)))}),L(()=>{var g;return xt(M,(g=a(Me))==null?void 0:g.id)}),e(ne,A)},$$slots:{default:!0}})}),e(xe,N)},$$slots:{default:!0}})}),e(O,H)},$$slots:{default:!0}})}),e(y,oe)},$$slots:{default:!0}})});var ht=t(gt,2),jt=u(ht);{var Ft=d=>{var k=aa(),y=u(k);nt(y,{get variant(){return we},get class(){return Ae},children:(C,oe)=>{var Z=ra(),ve=m(Z);sr(ve,{});var F=t(ve,2);cr(F,{children:(O,ge)=>{n();var H=v();L(()=>j(H,Qe)),e(O,H)},$$slots:{default:!0}}),e(C,Z)},$$slots:{default:!0}}),_(k),e(d,k)};Ie(jt,d=>{a(Ne)&&d(Ft)})}_(ht),L(d=>{j(Kt,`Harvest Records for ${D.data.client.name??""} - Stocking on ${d??""} (${D.data.stocking.species_name??""})`),j(Vt,`Stocking ID: ${D.data.stocking.id??""} | Fingerlings Stocked: ${D.data.stocking.fingerlings_stocked_count_ma??""}`)},[()=>et(D.data.stocking.stocking_date)]),e(Nt,it),Jt()}export{Da as component};
